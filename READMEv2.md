
# Домашнее задание к занятию "5.1. Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендоров и областей применения."


## Как сдавать задания

Обязательными к выполнению являются задачи без указания звездочки. Их выполнение необходимо для получения зачета и диплома о профессиональной переподготовке.

Задачи со звездочкой (*) являются дополнительными задачами и/или задачами повышенной сложности. Они не являются обязательными к выполнению, но помогут вам глубже понять тему.

Домашнее задание выполните в файле readme.md в github репозитории. В личном кабинете отправьте на проверку ссылку на .md-файл в вашем репозитории.

Любые вопросы по решению задач задавайте в чате учебной группы.

---

## Задача 1

Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.

## Ответ на Задачу 1
Основное отличие на мой взгляд следующее:

1. Аппаратная виртаулизация позволяет жестко контролировать распределение ресурсов, в т.ч. сетевые интерфейсы. Возможно устанавливать любые операционные системы.
2. Паравиртуализация позволяет запускать ядра ОС отличные от хостовой ОС 
3. При использовании паравиртуализации дистрибутивы соответствующих ОС для виртуальных машин должны быть модифицированы (т.е. возможность запуска ограничена ОС с открытым исходным кодом)
4. Виртуализация на основе ОС не позволяет запускать ОС отличные от хостовой

## Задача 2

Выберите один из вариантов использования организации физических серверов, в зависимости от условий использования.

Организация серверов:
- физические сервера,
- паравиртуализация,
- виртуализация уровня ОС.

Условия использования:
- Высоконагруженная база данных, чувствительная к отказу.
- Различные web-приложения.
- Windows системы для использования бухгалтерским отделом.
- Системы, выполняющие высокопроизводительные расчеты на GPU.

Опишите, почему вы выбрали к каждому целевому использованию такую организацию.

## Ответ на Задачу 2
- Высоконагруженная база данных, чувствительная к отказу
Я бы использовал физические сервера или аппаратную виртуализацию серверов, объединенных в кластер по нескольким причинам:
1. Отказоустойчивость. Пара отдельных физических серверов или аппаратная виртуализация на базе серверов в кластере , дублирующих другд руга обеспечит доступность базы данных даже в случае поломки одно из физических хостов
2. Нет конкуренции за ресурсы хоста. Каждый выделенные физический хост имеет свои апппаратные ресуры (аналогичная история с аппартной виртуализацией из-за ее возможности жесткого разделения ресурсов), которые не надо делить, например, в случае использования виртуальными 
машинами, соответственно есть прогнозируемая и управляемая производительность для всех компонент физического сервера.

- Различные web-приложения.
Возможно использовать виртуализацию на увроне ОС (например, Docker). JAVA приложения кроссплатформенны, можно запустить их на ОС аналогичной хосту,
( например, возможно применить микросервисную архитектуру, запустив набор микросервисов для распределенного приложения).

- Windows системы для использования Бухгалтерским отделом 
Возможно использовать паравиртуализацию на базе Hyper V от Microsoft, т.к. это позволит использовать ОС Windows, все системы установить на один хост, при отсутствии
специфических требований по отказоустойчивости и производительности Hyper V поможет сэкономить на железе и дальнейшем администрировании.

- Системы, выполняющие высокопроизводительные расчеты на GPU
Подойдет любая из систем виртуализации, позволяющая гибко и жестко распределять ресурсы gpu.

## Задача 3

Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.
2. Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.
3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.
4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.

##Ответ на задачу 3
1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, 
репликации данных и автоматизированного механизма создания резервных копий.
Для такого рода задач можно использовать Hyper-V, т.к. он является выбором defacto для окружений с преобладанием технологий Microsoft

2. Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.
На мой взгляд, для таких целей подойдет KVM, бесплатное open-source решение. Позволяет запускать виртуальные машины с различными операционными системами, предоставляет 
хорошую производительность.

3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.
По моему мнению, наиболее подходящий в этом случае opensource продукт от Xen. Решение имеет отличную производительность и стабильность работы.

4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.
Подойдет продукт от KVM, т.к. имеет нативную поддержку linux и менее затратна для развертывания.

## Задача 4

Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. 
Если бы у вас был выбор, то создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.

##Ответ на задачу 4

Проблемы и недостатки геторогенной среды вирутацилизаци, на мой взгляд, лежат в плоскости:

1. Увеличенной стоимости саппорта и затрат на разворачивание. Необходимы специалисты, умеющие работать со всеми применяемыми системами виртаулизациию
2. Необходимо больше тратить на закупку программного обеспечения (покупка лицензий на все системы витуализации)
3. Возможно, придется закупать различное аппаратное обеспечение для каждой из систем.

Варинат использование геторогенной системы виртуализации возможен, если используются системы "совместимые" системы виртуализации, т.е. одна система виртуализации
позволяет создавать вируатальные машины, на которых без проблем работает вторая система виртуализации. Плюс у данных систем виртуализации нет различий в требованиях 
к аппаратному обеспечению, их могут сопровождать одни и те же люди

Пример -  вполне жизнеспособен вариант когда совмещена, например, аппаратная виртуализация и виртуализация на уровне операционной системы.
Например, средствами VMWare созданы два хоста. Первый используется по БД, а на втором разворачиваются Docker контейнеры для микросервисов.


Дополнительные вопрос - допустим, в компании часть сервером работает под Hyper-V, а часть под KVM. Какие последствия могут быть в этом случае?
Проблемы можно разделить на несколько категорий:
1. Необходимо иметь дополнительных специалистов, обладающих опытом в работе как с Hyper-V и KVM. 
2. Необходимо поддерживать "двойной" набор аппартного обеспечения для каждой системы виртуализации в случае масштабирования или миграции.
3. Инфраструктурные - сложность разворачивания и настройки всех используемых систем виртуалзиации, а также дополнительные трудности с настройкой взаимодействия между отдельными элементами инфраструктуры
4. Дополнтельные сложности, связанные с миграцией виртуальных хостов с одной платформы на другую, необходимость настраивать несколько конфигураций бэкапов, standby
5. Дополнительные сложности с последующим обновлением всех систем виртуализации, используемых в компании.
6. Не будет возможности централизованного управления всей инфраструктурой. 

При всех недостатках такой вариант возможен, если компании требуется обеспечить инфраструктуру для раззличных задач. Например, высоконагруженные приложения для внешних 
клиентов и большая инфраструктура для back - офиса на windows.

